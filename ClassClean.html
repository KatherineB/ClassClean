<!DOCTYPE html>
<html>
<head><title>ClassClean</title>
<meta charset="utf-8"/>
<link rel="stylesheet" href="ClassClean.css">
</head>
<body>
<div class="main-div">
     <div class="heading">ClassClean</div>
	 <div class="string-type-box">
			<div class="string-type-label">Look for:</div>
			<div class="checkbox-holder">
			    <input class="string-type-checkbox" type="checkbox" id="class" value="classes">
                <label for="class" class="string-type-checkbox-label">Classes<label>
			</div>
			<div class="checkbox-holder">
			    <input class="string-type-checkbox" type="checkbox" id="id" value="ids">
                <label for="id">Ids<label>
			</div>
	  </div>
	<div class="file-uploaders">
		   <div class="file-input">
			  Enter CSS file:<br>
			  <input type="file" id="css-page">
		   </div>
		   <div class="file-input">
			  Enter HTML file:<br>
			  <input type="file" id="web-page">
		   </div>
		   <div style="clear:both;"></div>
	</div>
	<div class="button-box">
	        <input type="button" class="process-btn" id="test" value="Process" onClick="process()">
	</div>

<script type="text/javascript">
var cssText = "";
var htmlText = "";

document.getElementById('css-page').addEventListener('change', readFile, false);
document.getElementById('web-page').addEventListener('change', readFile, false);

function readFile(evt) {
   
    var inputFile = evt.target.files[0]; 

    if (inputFile) {
		  var readFile = new FileReader();
		  readFile.onload = function(e) { 
			  var contents = e.target.result;
			  var fileType = inputFile.type;
			  
			  if(fileType.indexOf("css") !== -1){
				  cssText = contents;
				  alert(cssText);
			  }
			  else if (fileType.indexOf("html") !== -1){
				  htmlText = contents;
				  alert(htmlText);
			  }
		
		  }

     readFile.readAsText(inputFile);	
    } 
    else { 
          alert("Failed to load file");
    }      
}
function process(){

	  if (document.getElementById('class').checked){
	      getClassesCSS();
	  }
	  if (document.getElementById('id').checked){
	      getIdsCSS();
	  }
}
function getClassesCSS(){
       alert("in getClassesCSS");
	  //  alert( /\..*{/.exec(cssText));
	  var regexpC = /\..*{/g;   // get strings that start with . and end with {
	  var classListCSS = cssText.match(regexpC);
	  alert(classListCSS);
	  for (var i=0; i<classListCSS.length; i++){
	      classListCSS[i] = classListCSS[i].substr(1);   //remove .
		  classListCSS[i] = classListCSS[i].slice(0,-1);  // remove {
	  }
	  alert(classListCSS);
}
function getIdsCSS(){
      alert("in getIdsCSS");
	  //  alert( /#.*{/.exec(cssText));
	   var regexpI = /#.*{/g;   // get strings that start with # and end with {
	   var idListCSS = cssText.match(regexpI);
	   alert(idListCSS);
	   for (var i=0; i<idListCSS.length; i++){
	      idListCSS[i] = idListCSS[i].substr(1);   //remove #
		  idListCSS[i] = idListCSS[i].slice(0,-1);  // remove {
	  }
	  alert(idListCSS);
}
  
</script>

</body>
</html>